<?xml version="1.0" encoding="UTF-8"?>
<!--
 * File           : $Header: //depot/escenic/widget-framework/trunk/widget-framework-core/src/main/webapp/META-INF/escenic/publication-resources/escenic/content-type#2 $
 * Last edited by : $Author: shah $ $Date: 2010/05/10 $
 * Version        : $Revision: #2 $
 *
 * Copyright (C) 2009 Escenic AS.
 * All Rights Reserved.  No use, copying or distribution of this
 * work may be made except in accordance with a valid license
 * agreement from Escenic AS.  This notice must be included on
 * all copies, modifications and derivatives of this work.
-->

<content-types xmlns="http://xmlns.escenic.com/2008/content-type"
               xmlns:ui="http://xmlns.escenic.com/2008/interface-hints"
               xmlns:geocode="http://xmlns.escenic.com/2009/studio/plugin/geocode"
               xmlns:rep="http://xmlns.escenic.com/2009/representations"
               version="4">
  <!-- field groups definitions for forum widget -->
  <!-- basic fields of forum widget-->
  <field-group name="forum-widget-basic-fields">
    <field name="view" type="enumeration">
      <ui:label>View</ui:label>
      <ui:description>This option is used to set the view to use.</ui:description>
      <enumeration value="threads">
        <ui:label>Threads</ui:label>
      </enumeration>
      <enumeration value="postings">
        <ui:label>Postings</ui:label>
      </enumeration>
      <ui:value-if-unset>threads</ui:value-if-unset>
    </field>
  </field-group>

  <!-- pagination fields of forum widget-->
  <field-group name="forum-widget-pagination-fields">
    <field name="enablePagination" type="boolean">
      <ui:label>Enable pagination</ui:label>
      <ui:boolean-label value="true">Enable pagination</ui:boolean-label>
      <ui:boolean-label value="false">Disable pagination</ui:boolean-label>
      <ui:description>Enable this to paginate the threads</ui:description>
      <ui:value-if-unset>true</ui:value-if-unset>
      <constraints>
	      <required>true</required>
	    </constraints>
    </field>
    <field name="pageSize" type="number">
      <ui:label>Number of items per page</ui:label>
      <ui:description>Number of items to display per page when pagination is enabled</ui:description>
      <constraints>
        <minimum>1</minimum>
        <maximum>100</maximum>
      </constraints>
      <format>###</format>
      <ui:value-if-unset>20</ui:value-if-unset>
    </field>
  </field-group>

  <!-- username fields of forum widget-->
  <field-group name="forum-widget-username-fields">
    <field name="usernameClickable" type="boolean">
      <ui:label>Username clickable?</ui:label>
      <ui:description>If enabled, clicking the username will go to the user profile page of that user</ui:description>
      <ui:value-if-unset>true</ui:value-if-unset>
      <constraints>
	      <required>true</required>
	    </constraints>
    </field>
  </field-group>

  <!-- threads fields of forum widget-->
  <field-group name="forum-widget-threads-fields">
    <field name="threadsSource" type="enumeration">
      <ui:label>Source of threads</ui:label>
      <ui:description>This option is used to set the source forum(s) for threads.</ui:description>
      <enumeration value="article">
        <ui:label>Current forum article</ui:label>
      </enumeration>
      <enumeration value="allForums">
        <ui:label>All forums of section</ui:label>
      </enumeration>
      <enumeration value="selectedForums">
        <ui:label>Selected forums</ui:label>
      </enumeration>
      <ui:value-if-unset>allForums</ui:value-if-unset>
    </field>
    <field name="forumIds" type="basic" mime-type="text/plain">
      <ui:label>Forum IDs</ui:label>
      <ui:description>Comma separated list of fourm IDs</ui:description>
    </field>
    <field name="titleLengthThreads" type="number">
      <ui:label>Maximum title characters</ui:label>
      <ui:description>Maximum number of characters in a thread title</ui:description>
      <constraints>
        <minimum>10</minimum>
        <maximum>500</maximum>
      </constraints>
      <format>###</format>
      <ui:value-if-unset>100</ui:value-if-unset>
    </field>
    <field name="bodyLengthThreads" type="number">
      <ui:label>Maximum body characters</ui:label>
      <ui:description>Maximum number of characters in a thread body</ui:description>
      <constraints>
        <minimum>100</minimum>
        <maximum>5000</maximum>
      </constraints>
      <format>####</format>
      <ui:value-if-unset>1000</ui:value-if-unset>
    </field>
  </field-group>

  <!-- postings fields of forum widget-->
  <field-group name="forum-widget-postings-fields">
    <field name="postingsSource" type="enumeration">
      <ui:label>Source of postings</ui:label>
      <ui:description>This option is used to set the source of postings.</ui:description>
      <enumeration value="thread">
        <ui:label>Postings of current thread</ui:label>
      </enumeration>
      <enumeration value="latest">
        <ui:label>Latest postings of section</ui:label>
      </enumeration>
      <ui:value-if-unset>latest</ui:value-if-unset>
    </field>
    <field name="showRatingPostings" type="boolean">
      <ui:label>Show rating</ui:label>
      <ui:boolean-label value="true">Enable thumbs up down rating</ui:boolean-label>
      <ui:boolean-label value="false">Disable thumbs up down rating</ui:boolean-label>
      <ui:description>Enable this to show rating of posting</ui:description>
      <ui:value-if-unset>true</ui:value-if-unset>
      <constraints>
	      <required>true</required>
	    </constraints>
    </field>
    <field name="negativeRatingThresholdPostings" type="number">
      <ui:label>Threshold value for negative ratings of a posting</ui:label>
      <ui:description>If the negative rating of posting reached this threshold value,
        then the posting becomes hidden by default
      </ui:description>
      <constraints>
        <maximum>-1</maximum>
      </constraints>
      <format>-##</format>
      <ui:value-if-unset>-5</ui:value-if-unset>
    </field>
    <field name="showAvatarPostings" type="boolean">
      <ui:label>Show avatar</ui:label>
      <ui:description>Decides if you should display the avatar in a posting or not.</ui:description>
      <ui:boolean-label value="true">Show avatar picture</ui:boolean-label>
      <ui:boolean-label value="false">Don't show avatar picture</ui:boolean-label>
      <ui:value-if-unset>true</ui:value-if-unset>
      <constraints>
	      <required>true</required>
	    </constraints>
    </field>
    <field name="avatarImageVersionPostings" type="enumeration">
      <ui:label>Avatar size</ui:label>
      <ui:description>The size of the avatar picture to be used in profile menu</ui:description>
      <enumeration value="w24">
        <ui:label>24 x 24</ui:label>
      </enumeration>
      <enumeration value="w48">
        <ui:label>48 x 48</ui:label>
      </enumeration>
      <enumeration value="w64">
        <ui:label>64 x 64</ui:label>
      </enumeration>
      <enumeration value="w96">
        <ui:label>96 x 96</ui:label>
      </enumeration>
      <ui:value-if-unset>w64</ui:value-if-unset>
    </field>
    <field name="showReplyLinkPostings" type="boolean">
      <ui:label>Reply to a posting</ui:label>
      <ui:boolean-label value="true">Allow reply to a posting</ui:boolean-label>
      <ui:boolean-label value="false">Don't allow reply to a posting</ui:boolean-label>
      <ui:description>Enable this to allow reply to a posting</ui:description>
      <ui:value-if-unset>true</ui:value-if-unset>
      <constraints>
	      <required>true</required>
	    </constraints>
    </field>
    <field name="showAbuseReportLinkPostings" type="boolean">
      <ui:label>Complaint against a posting</ui:label>
      <ui:boolean-label value="true">Allow complaint against a posting</ui:boolean-label>
      <ui:boolean-label value="false">Don't allow complaint against a posting</ui:boolean-label>
      <ui:description>Enable this to show abuse report link after posting</ui:description>
      <ui:value-if-unset>true</ui:value-if-unset>
      <constraints>
	      <required>true</required>
	    </constraints>
    </field>
    <field name="maxBodyLengthPostings" type="number">
      <ui:label>Maximum body characters</ui:label>
      <ui:description>Maximum number of characters in a posting body</ui:description>
      <constraints>
        <minimum>100</minimum>
        <maximum>5000</maximum>
      </constraints>
      <format>####</format>
      <ui:value-if-unset>1000</ui:value-if-unset>
    </field>
    <field name="maxDepthPostings" type="number">
      <ui:label>Maximum depth</ui:label>
      <ui:description>Maximum allowed depth of a posting</ui:description>
      <constraints>
        <minimum>1</minimum>
        <maximum>5</maximum>
      </constraints>
      <format>#</format>
      <ui:value-if-unset>3</ui:value-if-unset>
    </field>
  </field-group>

  <!-- advanced fields of forum widget-->
  <field-group name="forum-widget-advanced-fields">
    <field name="sectionUniqueName" type="basic" mime-type="text/plain">
      <ui:label>Section unique name</ui:label>
      <ui:description>The section unique name from where, the forum widget will fetch the contents by default
      </ui:description>
      <ui:value-if-unset>forum</ui:value-if-unset>
    </field>
    <field name="maxItems" type="number">
      <ui:label>Maximum number of items</ui:label>
      <ui:description>Maximum number of items to retrieve from the database</ui:description>
      <constraints>
        <minimum>1</minimum>
        <maximum>1000</maximum>
      </constraints>
      <format>####</format>
      <ui:value-if-unset>1000</ui:value-if-unset>
    </field>
  </field-group>

  <!-- content type definition for forum widget -->
  <content-type name="widget_forum">
    <ui:label>Forum Widget</ui:label>
    <ui:description>This widget is used to display forums, threads and postings.</ui:description>
    <ui:title-field>title</ui:title-field>
    <panel name="general">
      <ui:label>General</ui:label>
      <ui:description>The basic configuration fields</ui:description>
      <ref-field-group name="basic-widget-fields"/>
      <ref-field-group name="forum-widget-basic-fields"/>
    </panel>
    <panel name="threads">
      <ui:label>Threads</ui:label>
      <ui:description>The configuration fields for the threads view</ui:description>
      <ref-field-group name="forum-widget-threads-fields"/>
    </panel>
    <panel name="postings">
      <ui:label>Postings</ui:label>
      <ui:description>The configuration fields for the postings view</ui:description>
      <ref-field-group name="forum-widget-postings-fields"/>
    </panel>
    <panel name="advanced">
      <ui:label>Advanced</ui:label>
      <ui:description>The advanced configuration fields</ui:description>
      <ref-field-group name="basic-widget-style-fields"/>
      <ref-field-group name="forum-widget-advanced-fields"/>
      <ref-field-group name="forum-widget-pagination-fields"/>
      <ref-field-group name="forum-widget-username-fields"/>
      <ref-field-group name="noPrint-fields"/>
    </panel>
    <panel name="caching">
      <ui:label>Caching</ui:label>
      <ui:description>Allows you to control web cache settings</ui:description>
      <ref-field-group name="caching-basic-fields"/>
      <ref-field-group name="cache-control-public-fields"/>
    </panel>
    <ref-relation-type-group name="forumContentAttachments"/>
    <summary>
      <ui:label>Content Summary</ui:label>
      <field name="title" type="basic" mime-type="text/plain">
        <ui:label>Title</ui:label>
        <ui:description>The title of the widget</ui:description>
      </field>
    </summary>
  </content-type>
</content-types>